(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{5922:function(e,n,t){Promise.resolve().then(t.bind(t,6763))},6763:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return D}});var a=t(7437),r=t(4013);let s=e=>{let n,t,a;let r=e.split("\n"),s=[];return r.forEach(e=>{var r,l;""!==e&&(e.startsWith("###")?(a={type:"h3",title:e.replace("###","").trim(),randomKey:(100*Math.random()).toString()},null==t||null===(r=t.subheadings)||void 0===r||r.push(a)):e.startsWith("##")?(t={type:"h2",title:e.replace("##","").trim(),subheadings:[],randomKey:(100*Math.random()).toString()},null==n||null===(l=n.subheadings)||void 0===l||l.push(t)):e.startsWith("#")?(n={type:"h1",title:e.replace("#","").trim(),subheadings:[],randomKey:(100*Math.random()).toString()},s.push(n)):a?a.content=e:t?t.content=e:n&&(n.content=e))}),s};var l=t(2265),i=t(492),d=t(5656),o=t(7011),c=t(419),p=t(6369),x=t(4164),h=t(8894),g=t(2700);let u=e=>{var n;let t;let{heading:r,isDroppable:s,isDraggable:i,expanded:d,setExpanded:m,setAllHeadings:b}=e,[{isDragging:f},v]=(0,h.c)({type:"HEADING",item:{...r,parent:r.parent||null},collect:e=>({isDragging:e.isDragging()}),canDrag:()=>i}),[{isOver:j},y]=(0,o.L)({accept:"HEADING",drop:e=>{b(n=>{let t=[...n],a=t.findIndex(n=>n.randomKey===e.randomKey);t.splice(a,1);let s=t.findIndex(e=>e.randomKey===r.randomKey);return t.splice(s,0,e),t})},collect:e=>({isOver:e.isOver()}),canDrop:()=>s}),D=(0,l.useRef)(null),N=(0,l.useRef)(null);return i&&v(D),s&&y(N),(0,a.jsxs)(c.Z,{ref:N,sx:{opacity:f?.8:1,backgroundColor:j?"rgba(173, 216, 230, 0.4)":"white",border:j?"2px dashed #5a9bcb":"none",boxShadow:j?"0px 4px 8px rgba(0, 0, 0, 0.2)":"none",transition:"background-color 0.3s ease, box-shadow 0.3s ease","&:hover":{backgroundColor:"rgba(173, 216, 230, 0.6)"}},expanded:d.includes(r.randomKey),onChange:(t=r.randomKey,(e,n)=>{m(e=>n?[...e,t]:e.filter(e=>e!==t))}),children:[(0,a.jsx)(p.Z,{expandIcon:(0,a.jsx)(g.Z,{}),ref:D,children:(0,a.jsx)("strong",{children:r.title})}),(0,a.jsxs)(x.Z,{children:[(0,a.jsx)("p",{className:"p-2",children:r.content}),null===(n=r.subheadings)||void 0===n?void 0:n.map((e,n)=>(0,a.jsx)(u,{expanded:d,heading:e,isDraggable:i,isDroppable:s,setAllHeadings:b,setExpanded:m},n))]})]})},m=e=>{let{structure:n}=e,[t,r]=(0,l.useState)([]),[s,o]=(0,l.useState)([]),[c,p]=(0,l.useState)([]);return(0,a.jsx)("div",{className:"",children:(0,a.jsxs)("div",{className:"flex justify-between ",children:[(0,a.jsxs)("div",{className:"",children:[(0,a.jsx)(i.Z,{variant:"h4",sx:{textAlign:"center",fontWeight:"bold",paddingTop:"12px"},children:"Table of contents"}),(0,a.jsx)("div",{className:"pt-5",children:null==n?void 0:n.map((e,n)=>(0,a.jsx)(u,{heading:e,expanded:s,isDraggable:!0,setExpanded:o,setAllHeadings:r,isDroppable:!1},n))})]}),(0,a.jsxs)("div",{className:"w-[65%] ",children:[(0,a.jsx)(i.Z,{variant:"h5",sx:{textAlign:"center",fontStyle:"italic",paddingBottom:"16px",paddingTop:"4px"},children:"Drag and drop headings here"}),(0,a.jsxs)(d.Z,{sx:{border:"2px dashed #ccc",padding:"16px",borderRadius:"8px",paddingTop:"16px"},children:[t.map((e,n)=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u,{heading:e,expanded:c,isDraggable:!0,setExpanded:p,setAllHeadings:r,isDroppable:!0},n),(0,a.jsx)(b,{setAllHeadings:r,showInfo:0===t.length,allHeadings:t,short:!0,dropIndex:n+1})]})),0===t.length?(0,a.jsx)(b,{setAllHeadings:r,showInfo:!0}):null]})]})]})})},b=e=>{let{setAllHeadings:n,showInfo:t,allHeadings:r,short:s,dropIndex:c}=e,[{isOver:p},x]=(0,o.L)({accept:"HEADING",drop:e=>{n(n=>{if(t||!(null==r?void 0:r.find(n=>n.randomKey===e.randomKey)))return[...n,e];{let t=[...n],a=t.findIndex(n=>n.randomKey===e.randomKey);return t.splice(a,1),void 0!==c?t.splice(c,0,e):t.push(e),t}})},collect:e=>({isOver:e.isOver()})}),h=(0,l.useRef)(null);return x(h),(0,a.jsx)(d.Z,{ref:h,sx:{height:s?"10px":"100px",backgroundColor:p?"lightGreen":"white",borderRadius:"8px",marginTop:"8px",display:"flex",justifyContent:"center",alignItems:"center",transition:"background-color 0.3s",boxShadow:p?"0px 4px 8px rgba(0,0,0,0.2)":"none"},children:t?(0,a.jsx)(i.Z,{variant:"body2",sx:{color:"gray"},children:"Drop here to start rearranging"}):void 0})};var f=t(6729),v=t(4446),j=t(4222),y=t(3145);function D(){let[e,n]=(0,l.useState)([]);return console.log(e),(0,a.jsxs)("div",{className:"container mx-auto mt-16 flex flex-col gap-4",children:[(0,a.jsxs)(r.Z,{component:"label",role:void 0,variant:"contained",tabIndex:-1,startIcon:(0,a.jsx)(f.Z,{}),sx:{backgroundColor:"primary.dark",color:"white","&:hover":{backgroundColor:"lightGreen"}},children:["Upload file",(0,a.jsx)("input",{type:"file",className:"hidden",onChange:e=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];if(a){let e=new FileReader;e.onload=e=>{var t;n(s(null===(t=e.target)||void 0===t?void 0:t.result))},e.readAsText(a)}}})]}),0==e.length?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h1",{className:"text-center text-2xl font-semibold",children:"Upload a Text File to Get Started"}),(0,a.jsx)("div",{className:"flex items-center justify-center",children:(0,a.jsx)(y.default,{src:"https://images.gtag.xyz/images/sections/upload.svg",alt:"",width:300,height:300})})]}):(0,a.jsx)(v.W,{backend:j.PD,children:(0,a.jsx)(m,{structure:e})})]})}}},function(e){e.O(0,[33,650,971,117,744],function(){return e(e.s=5922)}),_N_E=e.O()}]);